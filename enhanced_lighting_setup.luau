-- Kanata Maze å¼·åŒ–ç…§æ˜ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæš—ã•è§£æ±ºç‰ˆï¼‰
print("ğŸ’¡ å¼·åŒ–ç…§æ˜ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­ç½®ä¸­...")

local workspace = game:GetService("Workspace")
local Lighting = game:GetService("Lighting")

-- MazeGameãƒ•ã‚©ãƒ«ãƒ€ã®å–å¾—
local mazeGame = workspace:FindFirstChild("MazeGame")
if not mazeGame then
    warn("âŒ MazeGameãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
    return
end

-- æ—¢å­˜ã®ç…§æ˜ã‚’å‰Šé™¤
local existingLighting = mazeGame:FindFirstChild("Lighting")
if existingLighting then
    existingLighting:Destroy()
end

-- æ–°ã—ã„ç…§æ˜ãƒ•ã‚©ãƒ«ãƒ€
local lightingFolder = Instance.new("Folder")
lightingFolder.Name = "Lighting"
lightingFolder.Parent = mazeGame

-- ç’°å¢ƒå…‰ã®å¤§å¹…æ”¹å–„
Lighting.Ambient = Color3.new(0.6, 0.6, 0.7)  -- å¤§å¹…ã«æ˜ã‚‹ã
Lighting.Brightness = 3  -- ã‚ˆã‚Šæ˜ã‚‹ã
Lighting.OutdoorAmbient = Color3.new(0.7, 0.7, 0.8)  -- å±‹å¤–ç’°å¢ƒå…‰ã‚‚æ˜ã‚‹ã
Lighting.ColorShift_Bottom = Color3.new(0.3, 0.3, 0.4)
Lighting.ColorShift_Top = Color3.new(0.9, 0.9, 1)

-- å¼·åŠ›ãªæ¾æ˜ä½œæˆé–¢æ•°
local function createPowerfulTorch(position, parent)
    local torchFolder = Instance.new("Folder")
    torchFolder.Name = "PowerfulTorch"
    torchFolder.Parent = parent
    
    -- æ¾æ˜ã®å°åº§
    local base = Instance.new("Part")
    base.Name = "Base"
    base.Size = Vector3.new(1, 1, 1)
    base.Position = position
    base.Anchored = true
    base.Material = Enum.Material.Rock
    base.BrickColor = BrickColor.new("Dark stone grey")
    base.Parent = torchFolder
    
    -- æ¾æ˜ã®æ”¯æŸ±
    local pole = Instance.new("Part")
    pole.Name = "Pole"
    pole.Size = Vector3.new(0.5, 8, 0.5)
    pole.Position = position + Vector3.new(0, 4.5, 0)
    pole.Anchored = true
    pole.Material = Enum.Material.Wood
    pole.BrickColor = BrickColor.new("Brown")
    pole.Parent = torchFolder
    
    -- å·¨å¤§ãªç‚ã®é ­éƒ¨
    local torchHead = Instance.new("Part")
    torchHead.Name = "TorchHead"
    torchHead.Size = Vector3.new(3, 3, 3)  -- å¤§ããã—ãŸ
    torchHead.Position = position + Vector3.new(0, 9, 0)
    torchHead.Anchored = true
    torchHead.Material = Enum.Material.Neon
    torchHead.BrickColor = BrickColor.new("Bright orange")
    torchHead.Shape = Enum.PartType.Ball
    torchHead.Parent = torchFolder
    
    -- è¶…å¼·åŠ›ãªå…‰æº
    local pointLight = Instance.new("PointLight")
    pointLight.Color = Color3.new(1, 0.8, 0.4)  -- æš–ã‹ã„ç™½è‰²å…‰
    pointLight.Brightness = 5  -- éå¸¸ã«æ˜ã‚‹ã
    pointLight.Range = 50  -- ç¯„å›²ã‚’å¤§å¹…æ‹¡å¤§
    pointLight.Parent = torchHead
    
    -- å¤§ããªç‚ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
    local fire = Instance.new("Fire")
    fire.Size = 8  -- ç‚ã®ã‚µã‚¤ã‚ºã‚’å¤§ãã
    fire.Heat = 15
    fire.Color = Color3.new(1, 0.6, 0)
    fire.SecondaryColor = Color3.new(1, 0.2, 0)
    fire.Parent = torchHead
    
    return torchFolder
end

-- å·¨å¤§ãªã‚­ãƒ£ãƒ³ãƒ—ãƒ•ã‚¡ã‚¤ãƒ¤ãƒ¼ä½œæˆé–¢æ•°
local function createMegaCampfire(position, parent)
    local campfireFolder = Instance.new("Folder")
    campfireFolder.Name = "MegaCampfire"
    campfireFolder.Parent = parent
    
    -- å¤§ããªçŸ³ã®è¼ª
    for i = 1, 12 do
        local angle = (i - 1) * (math.pi * 2 / 12)
        local stone = Instance.new("Part")
        stone.Name = "Stone" .. i
        stone.Size = Vector3.new(2, 1.5, 2)
        stone.Position = position + Vector3.new(math.cos(angle) * 5, 0.75, math.sin(angle) * 5)
        stone.Anchored = true
        stone.Material = Enum.Material.Rock
        stone.BrickColor = BrickColor.new("Dark stone grey")
        stone.Rotation = Vector3.new(0, math.deg(angle), 0)
        stone.Parent = campfireFolder
    end
    
    -- å¤§é‡ã®è–ª
    for i = 1, 12 do
        local log = Instance.new("Part")
        log.Name = "Log" .. i
        log.Size = Vector3.new(1.2, 1.2, 6)
        log.Position = position + Vector3.new(
            math.random(-30, 30) / 10,
            0.6,
            math.random(-30, 30) / 10
        )
        log.Anchored = true
        log.Material = Enum.Material.Wood
        log.BrickColor = BrickColor.new("Brown")
        log.Rotation = Vector3.new(0, math.random(0, 360), math.random(-15, 15))
        log.Parent = campfireFolder
    end
    
    -- å·¨å¤§ãªç‚ã®åŸºç›¤
    local fireBase = Instance.new("Part")
    fireBase.Name = "FireBase"
    fireBase.Size = Vector3.new(6, 0.2, 6)
    fireBase.Position = position + Vector3.new(0, 0.1, 0)
    fireBase.Anchored = true
    fireBase.Material = Enum.Material.Neon
    fireBase.BrickColor = BrickColor.new("Bright red")
    fireBase.Transparency = 0.5
    fireBase.Parent = campfireFolder
    
    -- è¶…å¼·åŠ›ãªå…‰æº
    local pointLight = Instance.new("PointLight")
    pointLight.Color = Color3.new(1, 0.7, 0.3)
    pointLight.Brightness = 8  -- éå¸¸ã«æ˜ã‚‹ã
    pointLight.Range = 80  -- è¶…åºƒç¯„å›²
    pointLight.Parent = fireBase
    
    -- å·¨å¤§ãªç‚ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
    local fire = Instance.new("Fire")
    fire.Size = 15  -- éå¸¸ã«å¤§ããªç‚
    fire.Heat = 20
    fire.Color = Color3.new(1, 0.5, 0)
    fire.SecondaryColor = Color3.new(1, 0, 0)
    fire.Parent = fireBase
    
    -- ç…™ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
    local smoke = Instance.new("Smoke")
    smoke.Size = 10
    smoke.Opacity = 0.2
    smoke.RiseVelocity = 25
    smoke.Color = Color3.new(0.4, 0.4, 0.4)
    smoke.Parent = fireBase
    
    return campfireFolder
end

-- å¤©äº•ç…§æ˜ã‚·ã‚¹ãƒ†ãƒ 
local function createCeilingLight(position, parent)
    local lightFixture = Instance.new("Part")
    lightFixture.Name = "CeilingLight"
    lightFixture.Size = Vector3.new(4, 1, 4)
    lightFixture.Position = position
    lightFixture.Anchored = true
    lightFixture.Material = Enum.Material.Neon
    lightFixture.BrickColor = BrickColor.new("Institutional white")
    lightFixture.Parent = parent
    
    -- éå¸¸ã«å¼·ã„å…‰æº
    local pointLight = Instance.new("PointLight")
    pointLight.Color = Color3.new(1, 1, 0.9)  -- ç™½è‰²å…‰
    pointLight.Brightness = 6
    pointLight.Range = 60
    pointLight.Parent = lightFixture
    
    return lightFixture
end

-- è¿·è·¯ã‚¨ãƒªã‚¢ã«å¯†é›†ã—ãŸæ¾æ˜ã‚’è¨­ç½®
local wallsFolder = mazeGame:FindFirstChild("Walls")
if wallsFolder then
    local walls = wallsFolder:GetChildren()
    local torchCount = 0
    
    -- 5å€‹ã”ã¨ã«æ¾æ˜ã‚’è¨­ç½®ï¼ˆå¯†åº¦ã‚’2å€ã«ï¼‰
    for i = 1, #walls, 5 do
        local wall = walls[i]
        if wall:IsA("Part") then
            -- å£ã®å››æ–¹å‘ã«æ¾æ˜ã‚’è¨­ç½®
            local positions = {
                wall.Position + Vector3.new(4, 0, 0),
                wall.Position + Vector3.new(-4, 0, 0),
                wall.Position + Vector3.new(0, 0, 4),
                wall.Position + Vector3.new(0, 0, -4)
            }
            
            for _, pos in ipairs(positions) do
                createPowerfulTorch(pos, lightingFolder)
                torchCount = torchCount + 1
            end
        end
    end
    
    print("ğŸ”¥ è¿·è·¯ã«å¼·åŠ›ãªæ¾æ˜ã‚’ " .. torchCount .. " å€‹è¨­ç½®ã—ã¾ã—ãŸ")
end

-- å¤©äº•ã«ç…§æ˜ã‚’è¿½åŠ ï¼ˆæ ¼å­çŠ¶é…ç½®ï¼‰
for x = -90, 90, 30 do
    for z = -70, 70, 30 do
        local ceilingPos = Vector3.new(x, 35, z)  -- å¤©äº•ä»˜è¿‘
        createCeilingLight(ceilingPos, lightingFolder)
    end
end
print("ğŸ’¡ å¤©äº•ã«æ ¼å­çŠ¶ç…§æ˜ã‚’è¨­ç½®ã—ã¾ã—ãŸ")

-- ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢ã®å¼·åŒ–ç…§æ˜
local startPositions = {
    Vector3.new(-30, 0, -105),  Vector3.new(0, 0, -105),   Vector3.new(30, 0, -105),
    Vector3.new(-30, 0, -115),  Vector3.new(0, 0, -115),   Vector3.new(30, 0, -115),
    Vector3.new(-30, 0, -125),  Vector3.new(0, 0, -125),   Vector3.new(30, 0, -125),
}

for _, pos in ipairs(startPositions) do
    createPowerfulTorch(pos, lightingFolder)
end

-- ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢ã«å·¨å¤§ã‚­ãƒ£ãƒ³ãƒ—ãƒ•ã‚¡ã‚¤ãƒ¤ãƒ¼
createMegaCampfire(Vector3.new(-15, 0, -110), lightingFolder)
createMegaCampfire(Vector3.new(15, 0, -110), lightingFolder)
createMegaCampfire(Vector3.new(0, 0, -120), lightingFolder)

print("ğŸ”¥ ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢ã«å¼·åŒ–ç…§æ˜ã‚’è¨­ç½®ã—ã¾ã—ãŸ")

-- ã‚´ãƒ¼ãƒ«ã‚¨ãƒªã‚¢ã®å¼·åŒ–ç…§æ˜
local goalPositions = {
    Vector3.new(-20, 0, 85),   Vector3.new(0, 0, 85),     Vector3.new(20, 0, 85),
    Vector3.new(-20, 0, 105),  Vector3.new(0, 0, 105),    Vector3.new(20, 0, 105),
    Vector3.new(-20, 0, 125),  Vector3.new(0, 0, 125),    Vector3.new(20, 0, 125),
}

for _, pos in ipairs(goalPositions) do
    createPowerfulTorch(pos, lightingFolder)
end

-- ã‚´ãƒ¼ãƒ«ã‚¨ãƒªã‚¢ã«å·¨å¤§ã‚­ãƒ£ãƒ³ãƒ—ãƒ•ã‚¡ã‚¤ãƒ¤ãƒ¼
createMegaCampfire(Vector3.new(-15, 0, 100), lightingFolder)
createMegaCampfire(Vector3.new(15, 0, 100), lightingFolder)
createMegaCampfire(Vector3.new(0, 0, 120), lightingFolder)

print("ğŸ”¥ ã‚´ãƒ¼ãƒ«ã‚¨ãƒªã‚¢ã«å¼·åŒ–ç…§æ˜ã‚’è¨­ç½®ã—ã¾ã—ãŸ")

-- è¿½åŠ ã®ç’°å¢ƒå…‰æºï¼ˆè¦‹ãˆãªã„å…‰æºã‚’é…ç½®ï¼‰
for x = -80, 80, 20 do
    for z = -100, 100, 20 do
        local invisibleLight = Instance.new("Part")
        invisibleLight.Name = "InvisibleLight"
        invisibleLight.Size = Vector3.new(1, 1, 1)
        invisibleLight.Position = Vector3.new(x, 20, z)
        invisibleLight.Anchored = true
        invisibleLight.Transparency = 1  -- å®Œå…¨ã«é€æ˜
        invisibleLight.CanCollide = false
        invisibleLight.Parent = lightingFolder
        
        local pointLight = Instance.new("PointLight")
        pointLight.Color = Color3.new(0.9, 0.9, 1)
        pointLight.Brightness = 3
        pointLight.Range = 30
        pointLight.Parent = invisibleLight
    end
end

print("âœ… å¼·åŒ–ç…§æ˜ã‚·ã‚¹ãƒ†ãƒ ã®è¨­ç½®å®Œäº†ï¼")
print("ğŸ”¥ è¶…å¼·åŠ›æ¾æ˜: è¿·è·¯å…¨åŸŸ + ã‚¨ãƒªã‚¢ç…§æ˜")
print("ğŸ”¥ å·¨å¤§ã‚­ãƒ£ãƒ³ãƒ—ãƒ•ã‚¡ã‚¤ãƒ¤ãƒ¼: å„ã‚¨ãƒªã‚¢3å€‹")
print("ğŸ’¡ å¤©äº•ç…§æ˜: æ ¼å­çŠ¶é…ç½®")
print("ğŸ’¡ è¦‹ãˆãªã„ç’°å¢ƒå…‰æº: å…¨åŸŸã‚«ãƒãƒ¼")
print("ğŸŒ… ç’°å¢ƒå…‰è¨­å®š: å¤§å¹…ã«æ˜ã‚‹ãèª¿æ•´")
print("")
print("ğŸŒŸ ã“ã‚Œã§è¿·è·¯ãŒéå¸¸ã«æ˜ã‚‹ããªã‚Šã¾ã—ãŸï¼")