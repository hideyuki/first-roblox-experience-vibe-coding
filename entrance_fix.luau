-- ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢å…¥å£ä¿®æ­£ï¼ˆç·Šæ€¥å¯¾å¿œï¼‰
print("ğŸšª ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢å…¥å£ã‚’ä¿®æ­£ä¸­...")

local workspace = game:GetService("Workspace")

-- MazeGameãƒ•ã‚©ãƒ«ãƒ€ã®å–å¾—
local mazeGame = workspace:FindFirstChild("MazeGame")
if not mazeGame then
    warn("âŒ MazeGameãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
    return
end

-- å£ãƒ•ã‚©ãƒ«ãƒ€ã®å–å¾—
local wallsFolder = mazeGame:FindFirstChild("Walls")
if not wallsFolder then
    warn("âŒ å£ãƒ•ã‚©ãƒ«ãƒ€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
    return
end

-- å•é¡Œã®ã‚ã‚‹å£ã‚’ç‰¹å®šã—ã¦å‰Šé™¤
local problematicWalls = {
    "MazeTopOuterWall",
    "StartAreaExtendedWallLeft", 
    "StartAreaExtendedWallRight",
    "MazeTopOuterWallLeft",
    "MazeTopOuterWallRight"
}

local deletedCount = 0
for _, wallName in ipairs(problematicWalls) do
    local wall = wallsFolder:FindFirstChild(wallName)
    if wall then
        wall:Destroy()
        deletedCount = deletedCount + 1
        print("ğŸ—‘ï¸ " .. wallName .. " ã‚’å‰Šé™¤ã—ã¾ã—ãŸ")
    end
end

-- å…¨ã¦ã®å­ã‚’ç¢ºèªã—ã¦ã€ã‚¹ã‚¿ãƒ¼ãƒˆå…¥å£ã‚’å¡ãå£ã‚’å‰Šé™¤
for _, part in pairs(wallsFolder:GetChildren()) do
    if part:IsA("Part") then
        local pos = part.Position
        local size = part.Size
        
        -- z=-85ä»˜è¿‘ã§x=0å‘¨è¾ºã®å¤§ããªå£ã‚’å‰Šé™¤
        if math.abs(pos.Z + 85) < 5 and size.X > 100 then
            part:Destroy()
            deletedCount = deletedCount + 1
            print("ğŸ—‘ï¸ å¤§å‹å…¥å£é˜»å®³å£ (" .. part.Name .. ") ã‚’å‰Šé™¤ã—ã¾ã—ãŸ")
        end
        
        -- ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢å¤–å´ã®é•·ã„å£ã‚’å‰Šé™¤
        if (math.abs(pos.X + 65) < 5 or math.abs(pos.X - 65) < 5) and 
           pos.Z < -90 and size.Z > 35 then
            part:Destroy()
            deletedCount = deletedCount + 1
            print("ğŸ—‘ï¸ ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢å¤–å´å£ (" .. part.Name .. ") ã‚’å‰Šé™¤ã—ã¾ã—ãŸ")
        end
    end
end

-- æ–°ã—ã„é©åˆ‡ãªå£ã‚’ä½œæˆï¼ˆå…¥å£ã‚’é–‹ã‘ã‚‹ï¼‰
local function createWall(position, size, name, parent)
    local wall = Instance.new("Part")
    wall.Name = name
    wall.Size = size
    wall.Position = position
    wall.Anchored = true
    wall.Material = Enum.Material.Brick
    wall.BrickColor = BrickColor.new("Dark stone grey")
    wall.Parent = parent
    return wall
end

-- è¿·è·¯ä¸Šå´ã®å£ã‚’é©åˆ‡ã«åˆ†å‰²ã—ã¦ä½œæˆï¼ˆå…¥å£ã‚’é–‹ã‘ã‚‹ï¼‰
createWall(Vector3.new(-85, 20, -85), Vector3.new(50, 40, 6), "MazeTopWallLeft", wallsFolder)    -- å·¦å´
createWall(Vector3.new(85, 20, -85), Vector3.new(50, 40, 6), "MazeTopWallRight", wallsFolder)    -- å³å´
-- ä¸­å¤®éƒ¨åˆ†ï¼ˆx=-35ã‹ã‚‰x=35ï¼‰ã¯é–‹ã‘ã¦ãŠãï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢ã¸ã®å…¥å£ï¼‰

print("âœ… ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢å…¥å£ä¿®æ­£å®Œäº†ï¼")
print("ğŸ—‘ï¸ å‰Šé™¤ã—ãŸå£: " .. deletedCount .. " å€‹")
print("ğŸšª æ–°ã—ã„å…¥å£: 70ã‚¹ã‚¿ãƒƒãƒ‰å¹… (x=-35 ã‹ã‚‰ x=35)")
print("ğŸ§± æ–°ã—ã„å£: å·¦å³ã«åˆ†å‰²é…ç½®")
print("")
print("ğŸ® ã“ã‚Œã§ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼")