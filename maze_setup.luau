-- å®Œå…¨ç‰ˆè¿·è·¯ã‚²ãƒ¼ãƒ æ§‹ç¯‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
local workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- æ—¢å­˜å‰Šé™¤
if workspace:FindFirstChild("MazeGame") then 
    workspace.MazeGame:Destroy() 
end

-- ãƒ¡ã‚¤ãƒ³ãƒ•ã‚©ãƒ«ãƒ€
local mazeGame = Instance.new("Folder")
mazeGame.Name = "MazeGame"
mazeGame.Parent = workspace

-- è¿·è·¯ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå‡ºå…¥å£ä»˜ãã€åºƒã„é€šè·¯ï¼‰
local pattern = {
    {1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1},
    {1,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1},
    {1,0,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,1,1,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,1,1,1,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,0,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,1,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,0,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,0,1,1,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,1},
    {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
    {1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1}
}

-- 1. ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢
local startFolder = Instance.new("Folder")
startFolder.Name = "StartArea"
startFolder.Parent = mazeGame

local startFloor = Instance.new("Part")
startFloor.Size = Vector3.new(30, 1, 15)
startFloor.Position = Vector3.new(0, 0, -35)
startFloor.Anchored = true
startFloor.Material = Enum.Material.Concrete
startFloor.BrickColor = BrickColor.new("Bright green")
startFloor.Parent = startFolder

local startWalls = {
    {Vector3.new(1, 10, 15), Vector3.new(-15.5, 5, -35)},
    {Vector3.new(1, 10, 15), Vector3.new(15.5, 5, -35)},
    {Vector3.new(30, 10, 1), Vector3.new(0, 5, -42.5)},
    {Vector3.new(12, 10, 1), Vector3.new(-9, 5, -27.5)},
    {Vector3.new(12, 10, 1), Vector3.new(9, 5, -27.5)}
}
for i, w in ipairs(startWalls) do
    local wall = Instance.new("Part")
    wall.Size, wall.Position = w[1], w[2]
    wall.Anchored = true
    wall.Material = Enum.Material.Brick
    wall.BrickColor = BrickColor.new("Dark stone grey")
    wall.Parent = startFolder
end

-- 2. ã‚´ãƒ¼ãƒ«ã‚¨ãƒªã‚¢
local goalFolder = Instance.new("Folder")
goalFolder.Name = "GoalArea"
goalFolder.Parent = mazeGame

local goalFloor = Instance.new("Part")
goalFloor.Size = Vector3.new(25, 1, 20)
goalFloor.Position = Vector3.new(0, 0, 45)
goalFloor.Anchored = true
goalFloor.Material = Enum.Material.Concrete
goalFloor.BrickColor = BrickColor.new("Bright red")
goalFloor.Parent = goalFolder

local goalWalls = {
    {Vector3.new(1, 10, 20), Vector3.new(-12.5, 5, 45)},
    {Vector3.new(1, 10, 20), Vector3.new(12.5, 5, 45)},
    {Vector3.new(25, 10, 1), Vector3.new(0, 5, 55)},
    {Vector3.new(9, 10, 1), Vector3.new(-8, 5, 35)},
    {Vector3.new(9, 10, 1), Vector3.new(8, 5, 35)}
}
for i, w in ipairs(goalWalls) do
    local wall = Instance.new("Part")
    wall.Size, wall.Position = w[1], w[2]
    wall.Anchored = true
    wall.Material = Enum.Material.Brick
    wall.BrickColor = BrickColor.new("Dark stone grey")
    wall.Parent = goalFolder
end

-- 3. è¿·è·¯ã®å£
local wallsFolder = Instance.new("Folder")
wallsFolder.Name = "Walls"
wallsFolder.Parent = mazeGame

local wallCount = 0
for row = 1, 25 do
    for col = 1, 25 do
        if pattern[row][col] == 1 then
            local wall = Instance.new("Part")
            wall.Size = Vector3.new(2, 10, 2)
            wall.Position = Vector3.new((col - 13) * 2, 5, (row - 13) * 2)
            wall.Anchored = true
            wall.Material = Enum.Material.Brick
            wall.BrickColor = BrickColor.new("Dark stone grey")
            wall.Parent = wallsFolder
            wallCount = wallCount + 1
        end
    end
end

-- 4. ã‚¹ã‚¿ãƒ¼ãƒˆã‚²ãƒ¼ãƒˆ
local startGate = Instance.new("Part")
startGate.Name = "StartGate"
startGate.Size = Vector3.new(6, 12, 1)
startGate.Position = Vector3.new(0, 6, -27.5)
startGate.Anchored = true
startGate.CanCollide = false
startGate.Material = Enum.Material.ForceField
startGate.BrickColor = BrickColor.new("Bright green")
startGate.Transparency = 0.7
startGate.Parent = mazeGame

-- 5. ã‚´ãƒ¼ãƒ«ã‚²ãƒ¼ãƒˆ
local goalGate = Instance.new("Part")
goalGate.Name = "GoalGate"
goalGate.Size = Vector3.new(6, 12, 1)
goalGate.Position = Vector3.new(0, 6, 35)
goalGate.Anchored = true
goalGate.CanCollide = false
goalGate.Material = Enum.Material.ForceField
goalGate.BrickColor = BrickColor.new("Bright red")
goalGate.Transparency = 0.7
goalGate.Parent = mazeGame

-- 6. ã‚¹ãƒãƒ¼ãƒ³åœ°ç‚¹ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢å†…ï¼‰
local spawnLocation = Instance.new("SpawnLocation")
spawnLocation.Name = "MazeSpawn"
spawnLocation.Size = Vector3.new(6, 1, 6)
spawnLocation.Position = Vector3.new(0, 1, -38)
spawnLocation.Anchored = true
spawnLocation.Material = Enum.Material.SmoothPlastic
spawnLocation.BrickColor = BrickColor.new("Bright blue")
spawnLocation.Parent = mazeGame

-- 7. ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒœãƒ¼ãƒ‰ï¼ˆã‚´ãƒ¼ãƒ«ã‚¨ãƒªã‚¢ã‹ã‚‰é›¢ã—ã¦é…ç½®ï¼‰
local rankingBoard = Instance.new("Part")
rankingBoard.Name = "RankingBoard"
rankingBoard.Size = Vector3.new(12, 20, 2)
rankingBoard.Position = Vector3.new(0, 10, 65)  -- ã‚´ãƒ¼ãƒ«ã‚¨ãƒªã‚¢ã‹ã‚‰20ã‚¹ã‚¿ãƒƒãƒ‰é›¢ã‚ŒãŸä½ç½®
rankingBoard.Anchored = true
rankingBoard.Material = Enum.Material.SmoothPlastic
rankingBoard.BrickColor = BrickColor.new("Dark stone grey")
rankingBoard.Parent = mazeGame

-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºç”¨ã®SurfaceGui
local rankingGui = Instance.new("SurfaceGui")
rankingGui.Name = "RankingGui"
rankingGui.Face = Enum.NormalId.Front
rankingGui.Parent = rankingBoard

-- ã‚¿ã‚¤ãƒˆãƒ«
local titleFrame = Instance.new("Frame")
titleFrame.Name = "TitleFrame"
titleFrame.Size = UDim2.new(1, 0, 0.1, 0)
titleFrame.Position = UDim2.new(0, 0, 0, 0)
titleFrame.BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
titleFrame.BorderSizePixel = 0
titleFrame.Parent = rankingGui

local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Size = UDim2.new(1, 0, 1, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "ğŸ† MAZE RANKINGS ğŸ†"
titleLabel.TextColor3 = Color3.new(1, 1, 0)
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.Parent = titleFrame

-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤ºã‚¨ãƒªã‚¢
local rankingFrame = Instance.new("ScrollingFrame")
rankingFrame.Name = "RankingFrame"
rankingFrame.Size = UDim2.new(1, 0, 0.9, 0)
rankingFrame.Position = UDim2.new(0, 0, 0.1, 0)
rankingFrame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
rankingFrame.BorderSizePixel = 0
rankingFrame.ScrollBarThickness = 8
rankingFrame.CanvasSize = UDim2.new(0, 0, 0, 2000)
rankingFrame.Parent = rankingGui

-- åˆæœŸãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚¨ãƒ³ãƒˆãƒª
for i = 1, 10 do
    local entryFrame = Instance.new("Frame")
    entryFrame.Name = "Entry" .. i
    entryFrame.Size = UDim2.new(1, -10, 0, 18)
    entryFrame.Position = UDim2.new(0, 5, 0, (i-1) * 20)
    entryFrame.BackgroundTransparency = 1
    entryFrame.Parent = rankingFrame
    
    local rankLabel = Instance.new("TextLabel")
    rankLabel.Name = "RankLabel"
    rankLabel.Size = UDim2.new(0.15, 0, 1, 0)
    rankLabel.Position = UDim2.new(0, 0, 0, 0)
    rankLabel.BackgroundTransparency = 1
    rankLabel.Text = "#" .. i
    rankLabel.TextColor3 = Color3.new(1, 1, 1)
    rankLabel.TextScaled = true
    rankLabel.Font = Enum.Font.SourceSansBold
    rankLabel.Parent = entryFrame
    
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Name = "NameLabel"
    nameLabel.Size = UDim2.new(0.55, 0, 1, 0)
    nameLabel.Position = UDim2.new(0.15, 0, 0, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = "---"
    nameLabel.TextColor3 = Color3.new(0.8, 0.8, 0.8)
    nameLabel.TextScaled = true
    nameLabel.Font = Enum.Font.SourceSans
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.Parent = entryFrame
    
    local timeLabel = Instance.new("TextLabel")
    timeLabel.Name = "TimeLabel"
    timeLabel.Size = UDim2.new(0.3, 0, 1, 0)
    timeLabel.Position = UDim2.new(0.7, 0, 0, 0)
    timeLabel.BackgroundTransparency = 1
    timeLabel.Text = "--:--"
    timeLabel.TextColor3 = Color3.new(0.6, 0.6, 1)
    timeLabel.TextScaled = true
    timeLabel.Font = Enum.Font.Code
    timeLabel.TextXAlignment = Enum.TextXAlignment.Right
    timeLabel.Parent = entryFrame
end

-- 8. RemoteEventsã®ä½œæˆ
local remoteEventsFolder = ReplicatedStorage:FindFirstChild("RemoteEvents")
if not remoteEventsFolder then
    remoteEventsFolder = Instance.new("Folder")
    remoteEventsFolder.Name = "RemoteEvents"
    remoteEventsFolder.Parent = ReplicatedStorage
end

local startTimerEvent = Instance.new("RemoteEvent")
startTimerEvent.Name = "StartTimer"
startTimerEvent.Parent = remoteEventsFolder

local stopTimerEvent = Instance.new("RemoteEvent")
stopTimerEvent.Name = "StopTimer"
stopTimerEvent.Parent = remoteEventsFolder

local updateRankingEvent = Instance.new("RemoteEvent")
updateRankingEvent.Name = "UpdateRanking"
updateRankingEvent.Parent = remoteEventsFolder

-- 9. ã‚µã‚¤ãƒ³ã®ä½œæˆ
local startSign = Instance.new("Part")
startSign.Name = "StartSign"
startSign.Size = Vector3.new(8, 3, 0.5)
startSign.Position = Vector3.new(0, 12, -28)
startSign.Anchored = true
startSign.Material = Enum.Material.SmoothPlastic
startSign.BrickColor = BrickColor.new("Bright blue")
startSign.Parent = mazeGame

local startGui = Instance.new("SurfaceGui")
startGui.Face = Enum.NormalId.Front
startGui.Parent = startSign

local startLabel = Instance.new("TextLabel")
startLabel.Size = UDim2.new(1, 0, 1, 0)
startLabel.BackgroundTransparency = 1
startLabel.Text = "ğŸš€ START MAZE ğŸš€"
startLabel.TextColor3 = Color3.new(1, 1, 1)
startLabel.TextScaled = true
startLabel.Font = Enum.Font.SourceSansBold
startLabel.Parent = startGui

local goalSign = Instance.new("Part")
goalSign.Name = "GoalSign"
goalSign.Size = Vector3.new(8, 3, 0.5)
goalSign.Position = Vector3.new(0, 12, 36)
goalSign.Anchored = true
goalSign.Material = Enum.Material.SmoothPlastic
goalSign.BrickColor = BrickColor.new("Bright red")
goalSign.Parent = mazeGame

local goalGui = Instance.new("SurfaceGui")
goalGui.Face = Enum.NormalId.Front
goalGui.Parent = goalSign

local goalLabel = Instance.new("TextLabel")
goalLabel.Size = UDim2.new(1, 0, 1, 0)
goalLabel.BackgroundTransparency = 1
goalLabel.Text = "ğŸ† GOAL ğŸ†"
goalLabel.TextColor3 = Color3.new(1, 1, 1)
goalLabel.TextScaled = true
goalLabel.Font = Enum.Font.SourceSansBold
goalLabel.Parent = goalGui

print("ğŸ‰ è¿·è·¯ã‚²ãƒ¼ãƒ å®Œå…¨æ§‹ç¯‰å®Œäº†ï¼")
print("âœ… è¿·è·¯: " .. wallCount .. " å€‹ã®å£")
print("âœ… ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢: é–‰é–ç©ºé–“")
print("âœ… ã‚´ãƒ¼ãƒ«ã‚¨ãƒªã‚¢: é–‰é–ç©ºé–“")
print("âœ… ã‚¹ãƒãƒ¼ãƒ³åœ°ç‚¹: ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢å†…")
print("âœ… ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒœãƒ¼ãƒ‰: ã‚´ãƒ¼ãƒ«ã‹ã‚‰20ã‚¹ã‚¿ãƒƒãƒ‰é›¢ã‚ŒãŸä½ç½®")
print("âœ… ã‚²ãƒ¼ãƒˆ: ã‚¹ã‚¿ãƒ¼ãƒˆãƒ»ã‚´ãƒ¼ãƒ«")
print("âœ… RemoteEvents: é€šä¿¡ç”¨")
print("")
print("ğŸ® ã‚²ãƒ¼ãƒ ã®æµã‚Œ:")
print("1. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¨ãƒªã‚¢ã«ã‚¹ãƒãƒ¼ãƒ³")
print("2. ç·‘ã®ã‚¹ã‚¿ãƒ¼ãƒˆã‚²ãƒ¼ãƒˆã‚’é€šéã§ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹")
print("3. è¿·è·¯ã‚’æ”»ç•¥")
print("4. èµ¤ã®ã‚´ãƒ¼ãƒ«ã‚²ãƒ¼ãƒˆã‚’é€šéã§ã‚¿ã‚¤ãƒãƒ¼åœæ­¢ãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ›´æ–°")
print("5. å†æŒ‘æˆ¦å¯èƒ½")
